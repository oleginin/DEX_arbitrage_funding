import sys
import os
import time

# –î–æ–¥–∞—î–º–æ –ø–æ—Ç–æ—á–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –≤ —à–ª—è—Ö–∏ –ø–æ—à—É–∫—É
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
from Scripts.monitor_spread_fund import run_monitor

# –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è –º–µ–Ω—é
G, Y, B, R, X = "\033[92m", "\033[93m", "\033[1m", "\033[91m", "\033[0m"
C = "\033[96m"


def clear_screen():
    os.system('cls' if os.name == 'nt' else 'clear')


def print_header():
    print(f"{B}{C}‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó{X}")
    print(f"{B}{C}‚ïë           ü§ñ DEX ARBITRAGE & FUNDING BOT         ‚ïë{X}")
    print(f"{B}{C}‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù{X}")


def run_trading_mode():
    """
    –ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ä–µ–∂–∏–º—É —Ç–æ—Ä–≥—ñ–≤–ª—ñ.
    –¢—É—Ç –ø—ñ–∑–Ω—ñ—à–µ –±—É–¥–µ –∫–æ–¥ Execution Engine.
    """
    clear_screen()
    print_header()
    print(f"\n{Y}üöß –†–ï–ñ–ò–ú –¢–û–†–ì–Ü–í–õ–Ü (AUTO-EXECUTION) üöß{X}")
    print("-" * 50)
    print(f"{R}–¶–µ–π –º–æ–¥—É–ª—å —â–µ –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ.{X}")
    print("–ù–∞ –¥–∞–Ω–æ–º—É –µ—Ç–∞–ø—ñ –º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–ª–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ (–ü—É–Ω–∫—Ç 1).")
    print("–ù–∞—Å—Ç—É–ø–Ω–∏–º –∫—Ä–æ–∫–æ–º –±—É–¥–µ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –æ—Ä–¥–µ—Ä—ñ–≤.")

    print(f"\n{B}–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter, —â–æ–± –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –≤ –≥–æ–ª–æ–≤–Ω–µ –º–µ–Ω—é...{X}", end="")
    input()


def main_menu():
    while True:
        clear_screen()
        print_header()

        print(f"\n{B}–û–±–µ—Ä—ñ—Ç—å —Ä–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏:{X}")
        print(f"   {Y}[1]{X} üìä –í—ñ–¥–∫—Ä–∏—Ç–∏ DEX –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ (Scanner)")
        print(f"   {Y}[2]{X} üí∏ –¢–æ—Ä–≥—É–≤–∞—Ç–∏ –∑–∞ –¥–∞–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (Auto-Trade)")
        print(f"   {Y}[3]{X} üö™ –í–∏—Ö—ñ–¥")

        print(f"\n{C}–í–∞—à –≤–∏–±—ñ—Ä > {X}", end="")

        choice = input().strip()

        if choice == '1':
            try:
                # –ó–∞–ø—É—Å–∫–∞—î–º–æ –º–æ–Ω—ñ—Ç–æ—Ä.
                # –ö–æ–ª–∏ –≤ –º–æ–Ω—ñ—Ç–æ—Ä—ñ –Ω–∞—Ç–∏—Å–Ω–µ—à Ctrl+C, –≤—ñ–Ω –≤–∏–∫–∏–Ω–µ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è,
                # –º–∏ –π–æ–≥–æ –∑–ª–æ–≤–∏–º–æ —ñ –ø–æ–≤–µ—Ä–Ω–µ–º–æ—Å—è –≤ –º–µ–Ω—é.
                run_monitor()
            except KeyboardInterrupt:
                pass  # –ü—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ—Å—å –≤ –º–µ–Ω—é
            except Exception as e:
                print(f"\n{R}–ü–æ–º–∏–ª–∫–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∞: {e}{X}")
                time.sleep(3)

        elif choice == '2':
            run_trading_mode()

        elif choice == '3':
            print(f"\n{G}üëã –î—è–∫—É—é –∑–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è. –î–æ –∑—É—Å—Ç—Ä—ñ—á—ñ!{X}")
            sys.exit()

        else:
            print(f"\n{R}‚ö†Ô∏è –ù–µ–≤—ñ—Ä–Ω–∏–π –≤–∏–±—ñ—Ä. –í–≤–µ–¥—ñ—Ç—å 1, 2 –∞–±–æ 3.{X}")
            time.sleep(1)


if __name__ == "__main__":
    try:
        main_menu()
    except KeyboardInterrupt:
        print(f"\n\n{G}üëã –ü—Ä–∏–º—É—Å–æ–≤–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è.{X}")
        sys.exit()